// Mineral Insights Workflow
digraph {
	graph [rankdir=TB splines=curved]
	A [label="User Query" fillcolor="#E6F3FF" shape=ellipse style=filled]
	R [label="React Frontend" fillcolor="#ADD8E6" shape=box style=filled]
	B [label="FastAPI Backend" fillcolor="#90EE90" shape=box style=filled]
	C [label="Location Extraction" fillcolor="#FFB6C1" shape=box style=filled]
	N [label="Mapping Query?" fillcolor="#FFD700" shape=diamond style=filled]
	O [label="Mapping Agent" fillcolor="#FFB6C1" shape=box style=filled]
	P [label="SQLite Permit DB" fillcolor="#87CEEB" shape=cylinder style=filled]
	D [label="LangGraph Orchestrator" fillcolor="#FFD700" shape=box style=filled]
	E [label="Document Retrieval" fillcolor="#DDA0DD" shape=box style=filled]
	F [label="Pinecone Vector DB" fillcolor="#87CEEB" shape=cylinder style=filled]
	G [label="Document Ranking" fillcolor="#DDA0DD" shape=box style=filled]
	H [label="Answer Generation" fillcolor="#DDA0DD" shape=box style=filled]
	I [label="Confidence Check" fillcolor="#FFD700" shape=diamond style=filled]
	J [label="Web Search Agent" fillcolor="#FFB6C1" shape=box style=filled]
	K [label="Tavily API" fillcolor="#F0E68C" shape=oval style=filled]
	L [label="Enhanced Answer Generation" fillcolor="#DDA0DD" shape=box style=filled]
	M [label="Final Answer" fillcolor="#98FB98" shape=box style=filled]
	Q [label="Response Assembly" fillcolor="#90EE90" shape=box style=filled]
	A -> B [label="API Request"]
	B -> C [label="Extract Location"]
	B -> D [label="Process Query"]
	D -> E [label="Retrieve Documents"]
	E -> F [label="Query Vector DB"]
	D -> G [label="Rank Documents"]
	D -> H [label="Generate Answer"]
	H -> I [label="Check Confidence"]
	I -> J [label="Low Confidence"]
	J -> K [label="Web Search"]
	K -> L [label="Enhance Answer"]
	I -> M [label="High Confidence"]
	L -> M [label="Final Answer"]
	B -> N [label="Check for Mapping"]
	N -> O [label=Yes]
	O -> P [label="Query Permits"]
	M -> Q [label="Assemble Response"]
	P -> Q [label="Add Mapping Data"]
	Q -> R [label="Return to Frontend"]
	node [fontsize=10]
	edge [fontsize=8]
}
